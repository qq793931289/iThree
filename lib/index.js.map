{"version":3,"sources":["webpack://icesium/webpack/universalModuleDefinition","webpack://icesium/webpack/bootstrap","webpack://icesium/external \"three\"","webpack://icesium/external \"react\"","webpack://icesium/external \"three/examples/jsm/controls/OrbitControls.js\"","webpack://icesium/external \"three/examples/jsm/postprocessing/EffectComposer.js\"","webpack://icesium/external \"three/examples/jsm/postprocessing/RenderPass.js\"","webpack://icesium/external \"three/examples/jsm/postprocessing/AfterimagePass.js\"","webpack://icesium/./src/three/init.ts","webpack://icesium/./src/config/config.ts","webpack://icesium/./src/components/ui/base.tsx","webpack://icesium/./src/three/ui.comp.tsx"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","onWindowResize","camera","aspect","innerWidth","innerHeight","updateProjectionMatrix","renderer","setSize","renderCanvas","console","log","animate","requestAnimationFrame","mesh","rotateX","Math","random","rotateY","rotateZ","composer","render","componentDidMount","this","init","container","document","getElementById","position","z","scene","add","light1","set","light2","box","material","wireframe","transparent","opacity","antialias","setPixelRatio","devicePixelRatio","toneMapping","toneMappingExposure","outputEncoding","appendChild","domElement","autoClearStencil","controls","addEventListener","minDistance","maxDistance","target","update","addPass","afterimagePass","Config","id","style","width","height","Component"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,UAAW,GAAIH,GACI,iBAAZC,QACdA,QAAiB,QAAID,IAErBD,EAAc,QAAIC,IARpB,CASGK,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,gBClFrDtC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,U,cCAzBvC,EAAOD,QAAUwC,QAAQ,iD,cCAzBvC,EAAOD,QAAUwC,QAAQ,wD,cCAzBvC,EAAOD,QAAUwC,QAAQ,oD,cCAzBvC,EAAOD,QAAUwC,QAAQ,wD,qKCYzB,aAeE,wBAkBO,KAAAC,eAAiB,WACjB,EAAKC,QAKV,EAAKA,OAAOC,OAASvC,OAAOwC,WAAaxC,OAAOyC,YAEhD,EAAKH,OAAOI,yBAEZ,EAAKC,SAAUC,QAAQ5C,OAAOwC,WAAYxC,OAAOyC,aAEjD,EAAKI,gBAVHC,QAAQC,IAAI,EAAKT,SAed,KAAAU,QAAU,WAEfhD,OAAOiD,sBAAsB,EAAKD,SAElC,EAAKH,eAEL,EAAKK,KACFC,QAAQ,KAAQC,KAAKC,SAAW,GAChCC,QAAQ,KAAQF,KAAKC,SAAW,GAChCE,SAAS,KAAQH,KAAKC,SAAW,IAI/B,KAAAR,aAAe,WAGhB,EAAKW,UACP,EAAKA,SAASC,UAlDhBX,QAAQC,IAAI,qBAiIhB,OA5HS,YAAAW,kBAAP,WAKEC,KAAKC,OACLD,KAAKd,eACLc,KAAKtB,kBA0CA,YAAAuB,KAAP,WAGED,KAAKE,UAAYC,SAASC,eAAe,kBAMzCJ,KAAKrB,OAAS,IAAI,oBAAwB,GAAItC,OAAOwC,WAAaxC,OAAOyC,YAAa,EAAG,MACzFkB,KAAKrB,OAAO0B,SAASC,EAAI,KASzBN,KAAKO,MAAQ,IAAI,QAEjBP,KAAKO,MAAMC,IAAI,IAAI,eAAmB,UAEtC,IAAMC,EAAS,IAAI,mBAAuB,SAAU,IACpDA,EAAOJ,SAASK,IAAI,EAAG,EAAG,GAC1BV,KAAKO,MAAMC,IAAIC,GAEf,IAAME,EAAS,IAAI,mBAAuB,SAAU,KACpDA,EAAON,SAASK,IAAI,GAAK,EAAG,GAC5BV,KAAKO,MAAMC,IAAIG,GAEf,IAAMC,EAAM,IAAI,uBAA2B,EAAG,EAAG,EAAG,EAAG,EAAG,GACpDC,EAAW,IAAI,qBAAyB,CAE5CC,WAAW,EACXC,aAAa,EACbC,QAAS,KAEXhB,KAAKT,KAAO,IAAI,OAAWqB,EAAKC,GAChCb,KAAKO,MAAMC,IAAIR,KAAKT,MAEpBS,KAAKhB,SAAW,IAAI,gBAAoB,CAAEiC,WAAW,IACrDjB,KAAKhB,SAASkC,cAAc7E,OAAO8E,kBACnCnB,KAAKhB,SAASC,QAAQ5C,OAAOwC,WAAYxC,OAAOyC,aAChDkB,KAAKhB,SAASoC,YAAc,wBAC5BpB,KAAKhB,SAASqC,oBAAsB,EACpCrB,KAAKhB,SAASsC,eAAiB,eAC/BtB,KAAKE,UAAWqB,YAAYvB,KAAKhB,SAASwC,YAE1CxB,KAAKhB,SAASyC,kBAAmB,EAEjCzB,KAAK0B,SAAW,IAAI,gBAAc1B,KAAKrB,OAAQqB,KAAKhB,SAASwC,YAC7DxB,KAAK0B,SAASC,iBAAiB,SAAU3B,KAAKd,cAC9Cc,KAAK0B,SAASE,YAAc,EAC5B5B,KAAK0B,SAASG,YAAc,GAC5B7B,KAAK0B,SAASI,OAAOpB,IAAI,EAAG,GAAK,IACjCV,KAAK0B,SAASK,SAEd/B,KAAKX,UAILW,KAAKH,SAAW,IAAI,iBAAeG,KAAKhB,UACxCgB,KAAKH,SAASmC,QAAQ,IAAI,aAAWhC,KAAKO,MAAOP,KAAKrB,SAEtDqB,KAAKiC,eAAiB,IAAI,iBAC1BjC,KAAKH,SAASmC,QAAQhC,KAAKiC,gBAK3B5F,OAAOsF,iBAAiB,SAAU3B,KAAKtB,gBAAgB,IAI3D,EAlJA,G,gBCZawD,EACE,iB,0UCIf,2B,+CAmBA,OAnBmC,OAM1B,YAAAnC,kBAAP,aAIO,YAAAD,OAAP,WAEE,OACE,yBAAKqC,GAAID,EAAoBE,MAFjB,CAAEC,MAAO,OAAQC,OAAQ,YAQ3C,EAnBA,CAAmC,IAAMC,W,iWCCzC,2B,+CAkBA,OAlBoC,OAM3B,YAAAxC,kBAAP,YACe,IAAI,GACZA,qBAIA,YAAAD,OAAP,WACE,OACE,kBAAC,EAAa,OAIpB,EAlBA,CAAoC,IAAMyC","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"icesium\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"icesium\"] = factory();\n\telse\n\t\troot[\"icesium\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = require(\"three\");","module.exports = require(\"react\");","module.exports = require(\"three/examples/jsm/controls/OrbitControls.js\");","module.exports = require(\"three/examples/jsm/postprocessing/EffectComposer.js\");","module.exports = require(\"three/examples/jsm/postprocessing/RenderPass.js\");","module.exports = require(\"three/examples/jsm/postprocessing/AfterimagePass.js\");","import * as THREE from 'three';\r\n\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\r\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass.js';\r\n// import 'three/examples/jsm/controls/OrbitControls.js';\r\n// import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\n// import { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js';\r\n// import { RoughnessMipmapper } from 'three/examples/jsm/utils/RoughnessMipmapper.js';\r\n// console.log(THREE);\r\n\r\nexport class ThreeRun {\r\n\r\n  public container?: HTMLElement | null;\r\n  public controls?: OrbitControls;\r\n  public camera?: THREE.PerspectiveCamera;\r\n  public scene?: THREE.Scene;\r\n  public renderer?: THREE.WebGLRenderer;\r\n  public mesh?: THREE.Mesh;\r\n  public composer?: EffectComposer;\r\n  public afterimagePass?: AfterimagePass;\r\n\r\n  // constructor(props) {\r\n  //   super(props);\r\n  // }\r\n\r\n  constructor() {\r\n\r\n    console.log('init ithree 1.0.3');\r\n\r\n    // this.componentDidMount();\r\n  }\r\n\r\n  public componentDidMount() {\r\n    // console.log(this.props.match.params);\r\n    // console.log(this.props.history.location.state);\r\n    // console.log(THREE);\r\n\r\n    this.init();\r\n    this.renderCanvas();\r\n    this.onWindowResize();\r\n\r\n  }\r\n\r\n  public onWindowResize = () => {\r\n    if (!this.camera) {\r\n      console.log(this.camera);\r\n      return;\r\n    }\r\n\r\n    this.camera.aspect = window.innerWidth / window.innerHeight;\r\n\r\n    this.camera.updateProjectionMatrix();\r\n\r\n    this.renderer!.setSize(window.innerWidth, window.innerHeight);\r\n\r\n    this.renderCanvas();\r\n\r\n  }\r\n\r\n  //\r\n  public animate = () => {\r\n\r\n    window.requestAnimationFrame(this.animate);\r\n\r\n    this.renderCanvas();\r\n\r\n    this.mesh!\r\n      .rotateX(0.002 * Math.random() * 4)\r\n      .rotateY(0.002 * Math.random() * 4)\r\n      .rotateZ(-0.002 * Math.random() * 4);\r\n\r\n  }\r\n\r\n  public renderCanvas = () => {\r\n\r\n    // this.renderer.render(this.scene, this.camera);\r\n    if (this.composer) {\r\n      this.composer.render();\r\n    }\r\n  }\r\n\r\n  public init() {\r\n\r\n    // this.container = document.createElement('div');\r\n    this.container = document.getElementById('threeContainer');\r\n    // document.body.appendChild(this.container);\r\n\r\n    // this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.25, 20);\r\n    // this.camera.position.set(- 1.8, 0.6, 2.7);\r\n\r\n    this.camera = new THREE.PerspectiveCamera(72, window.innerWidth / window.innerHeight, 1, 3500);\r\n    this.camera.position.z = 2750;\r\n\r\n    // console.log(this.container);\r\n    // const SCREEN_WIDTH = this.container.style.width;\r\n    // const SCREEN_HEIGHT = this.container.style.height;\r\n    // const aspect = SCREEN_WIDTH / SCREEN_HEIGHT;\r\n    // const frustumSize = 600;\r\n    // this.camera = new THREE.OrthographicCamera(0.5 * frustumSize * aspect / - 2, 0.5 * frustumSize * aspect / 2, frustumSize / 2, frustumSize / - 2, 150, 1000);\r\n\r\n    this.scene = new THREE.Scene();\r\n\r\n    this.scene.add(new THREE.AmbientLight(0x444444));\r\n\r\n    const light1 = new THREE.DirectionalLight(0xFFFFFF, 0.5);\r\n    light1.position.set(1, 1, 1);\r\n    this.scene.add(light1);\r\n\r\n    const light2 = new THREE.DirectionalLight(0xFFFFFF, 1.5);\r\n    light2.position.set(0, - 1, 0);\r\n    this.scene.add(light2);\r\n\r\n    const box = new THREE.SphereBufferGeometry(4, 4, 4, 1, 1, 1);\r\n    const material = new THREE.MeshNormalMaterial({\r\n      // color: 0xFFFF00,\r\n      wireframe: true,\r\n      transparent: true,\r\n      opacity: 0.6,\r\n    });\r\n    this.mesh = new THREE.Mesh(box, material);\r\n    this.scene.add(this.mesh);\r\n\r\n    this.renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    this.renderer.toneMapping = THREE.ACESFilmicToneMapping;\r\n    this.renderer.toneMappingExposure = 1;\r\n    this.renderer.outputEncoding = THREE.sRGBEncoding;\r\n    this.container!.appendChild(this.renderer.domElement);\r\n\r\n    this.renderer.autoClearStencil = false;\r\n\r\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    this.controls.addEventListener('change', this.renderCanvas); // use if there is no animation loop\r\n    this.controls.minDistance = 2;\r\n    this.controls.maxDistance = 10;\r\n    this.controls.target.set(0, 0, - 0.2);\r\n    this.controls.update();\r\n\r\n    this.animate();\r\n\r\n    // postprocessing\r\n\r\n    this.composer = new EffectComposer(this.renderer);\r\n    this.composer.addPass(new RenderPass(this.scene, this.camera));\r\n\r\n    this.afterimagePass = new AfterimagePass();\r\n    this.composer.addPass(this.afterimagePass);\r\n\r\n    // this.afterimagePass.uniforms['damp'] = 0.99;\r\n    // this.afterimagePass.uniforms.damp = 0.999;\r\n\r\n    window.addEventListener('resize', this.onWindowResize, false);\r\n\r\n  }\r\n\r\n}","export const Config = {\r\n  containerId: 'threeContainer',\r\n};","\r\n\r\nimport React from 'react';\r\nimport { Config } from '../../config';\r\n\r\nexport class BaseContainer extends React.Component {\r\n\r\n  // constructor() {\r\n  //   super();\r\n  // }\r\n\r\n  public componentDidMount() {\r\n\r\n  }\r\n\r\n  public render() {\r\n    const style = { width: '100%', height: '100vh' };\r\n    return (\r\n      <div id={Config.containerId} style={style} >\r\n        {/* 浏览器不兼容! */}\r\n      </div>\r\n    );\r\n  }\r\n\r\n}","\r\n\r\nimport React from 'react';\r\nimport { ThreeRun } from './init';\r\nimport { BaseContainer } from '../components/ui/base';\r\n\r\nexport class ThreeContainer extends React.Component {\r\n\r\n  // constructor() {\r\n  //   super();\r\n  // }\r\n\r\n  public componentDidMount() {\r\n    const demo = new ThreeRun();\r\n    demo.componentDidMount()\r\n    // console.log(a, 'ThreeRun');\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <BaseContainer />\r\n    );\r\n  }\r\n\r\n}"],"sourceRoot":""}